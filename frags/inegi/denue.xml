<Schema name="datamexico">
  <Cube name="inegi_denue">
    <Table name="inegi_denue" primary_key="loc_id" />
    <Dimension name="Industry" foreign_key="national_industry_id">
      <Hierarchy name="Industry" primary_key="national_industry_id">
        <Table name="dim_shared_industry"/>

        <Level name="Sector" key_column="sector_id" name_column="sector_en" key_type="text">
          <Property name="sector_es" column="sector_es" caption_set="es"/>
        </Level>

        <Level name="Subsector" key_column="subsector_id" name_column="subsector_en" key_type="text">
          <Property name="subsector_es" column="subsector_es" caption_set="es"/>
        </Level>

        <Level name="Industry Group" key_column="industry_group_id" name_column="industry_group_en" key_type="text">
          <Property name="industry_group_es" column="industry_group_es" caption_set="es"/>
        </Level>

        <Level name="NAICS Industry" key_column="naics_industry_id" name_column="naics_industry_en" key_type="text">
          <Property name="naics_industry_es" column="naics_industry_es" caption_set="es"/>
        </Level>

        <Level name="National Industry" key_column="national_industry_id" name_column="national_industry_en" key_type="text">
          <Property name="national_industry_es" column="national_industry_es" caption_set="es"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension name="Geography" foreign_key="loc_id">
      <Hierarchy name="Geography" primary_key="loc_id">
        <Table name="dim_shared_geography" />
        <Level name="State" key_column="ent_id" name_column="ent_name" key_type="nontext">
          <Property name="CVE State" column="cve_ent" />
        </Level>
        <Level name="Municipality" key_column="mun_id" name_column="mun_name" key_type="nontext">
          <Property name="CVE Municipality" column="cve_mun" />
          <Property name="CVE Municipality Full" column="cve_mun_full" />
        </Level>
        <Level name="Location" key_column="loc_id" name_column="loc_name" key_type="nontext">
          <Property name="CVE Location" column="cve_loc" />
          <Property name="CVE Location Full" column="cve_loc_full" />
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension name="Company Size" foreign_key="n_workers">
      <Hierarchy name="Company Size" primary_key="id">

        <InlineTable alias="dim_inline_company_size">
          <ColumnDef name="id" key_type="nontext" />
          <ColumnDef name="name_en" key_type="text" />
          <ColumnDef name="name_es" key_type="text" />
          <Row>
            <Value column="id">1</Value>
            <Value column="name">0 - 5</Value>
          </Row>
          <Row>
            <Value column="id">2</Value>
            <Value column="name">6 - 10</Value>
          </Row>
          <Row>
            <Value column="id">3</Value>
            <Value column="name">11 - 30</Value>
          </Row>
          <Row>
            <Value column="id">4</Value>
            <Value column="name">31 - 50</Value>
          </Row>
          <Row>
            <Value column="id">5</Value>
            <Value column="name">51 - 100</Value>
          </Row>
          <Row>
            <Value column="id">6</Value>
            <Value column="name">101 - 250</Value>
          </Row>
          <Row>
            <Value column="id">7</Value>
            <Value column="name">251+</Value>
          </Row>
        </InlineTable>
        <Level name="Company Size" key_column="id" name_column="name" />
      </Hierarchy>
    </Dimension>


    <Dimension name="Establishment" foreign_key="establishment">
      <Hierarchy name="Establishment" primary_key="id">

        <InlineTable alias="dim_inline_company_size">
          <ColumnDef name="id" key_type="nontext" />
          <ColumnDef name="name_en" key_type="text" />
          <ColumnDef name="name_es" key_type="text" />
          <Row>
            <Value column="id">1</Value>
            <Value column="name_en">Fijo</Value>
            <Value column="name_es">0 - 5</Value>
          </Row>
          <Row>
            <Value column="id">2</Value>
            <Value column="name_en">Semifijo</Value>
            <Value column="name_es">0 - 5</Value>
          </Row>
          <Row>
            <Value column="id">3</Value>
            <Value column="name_en">Actividad en vivienda</Value>
            <Value column="name_es">0 - 5</Value>
          </Row>
        </InlineTable>
        <Level name="Establishment" key_column="id" name_column="name_en">
          <Property name="Establishment ES" column="name_es" caption_set="es"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Measure name="Number of Companies" column="name" aggregator="count" />
  </Cube>
</Schema>